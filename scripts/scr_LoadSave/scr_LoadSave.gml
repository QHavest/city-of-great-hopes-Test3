function save_room(){
	
	var _roomStruct = {
		
	
	}
#region rooms	
if room = rm_bakery {global.levelData.rm_bakery = _roomStruct;};		
if room = rm_food_shop {global.levelData.rm_food_shop	= _roomStruct;};		
if room = rm_indoor_rival_station {global.levelData.rm_indoor_rival_station = _roomStruct;};
if room = rm_street_first_side {global.levelData.rm_street_first_side	= _roomStruct;};
if room = rm_street_second_side {global.levelData.rm_street_second_side = _roomStruct;};
if room = rm_tri_kalynky {global.levelData.rm_tri_kalynky	= _roomStruct;};
if room = rm_tri_kalynky_boss {global.levelData.rm_tri_kalynky_boss	= _roomStruct;};
if room = rm_fishing {global.levelData.rm_fishing	= _roomStruct;};
if room = rm_zoomagazine {global.levelData.rm_zoomagazine	= _roomStruct;};		
if room = rm_okorochok_indoor {global.levelData.rm_okorochok_indoor	= _roomStruct;};		
if room = rm_storage {global.levelData.rm_storage	= _roomStruct;};
if room = rm_tech {global.levelData.rm_tech = _roomStruct;};	
if room = rm_fish_and_bazaar {global.levelData.rm_fish_and_bazaar	= _roomStruct;};			
if room = rm_street_container {global.levelData.rm_street_container = _roomStruct;};
if room = rm_street_magazine_tech_storage {global.levelData.rm_street_magazine_tech_storage = _roomStruct;};	
if room = rm_garage_gg {global.levelData.rm_garage_gg = _roomStruct;};
if room = rm_home_gg {global.levelData.rm_home_gg	= _roomStruct;};
if room = rm_home_gg_inside {global.levelData.rm_home_gg_inside = _roomStruct;};
if room = rm_home_gg_inside_kitchen {global.levelData.rm_home_gg_inside_kitchen = _roomStruct;};	
if room = rm_cinema_inside {global.levelData.rm_cinema_inside	= _roomStruct;};
if room = rm_cinema_r {global.levelData.rm_cinema_r	= _roomStruct;};
if room = rm_hotel_inside {global.levelData.rm_hotel_inside	= _roomStruct;};
if room = rm_hotel_rooms {global.levelData.rm_hotel_rooms		= _roomStruct;};
if room = rm_kitchen {global.levelData.rm_kitchen		= _roomStruct;};
if room = rm_restraunt {global.levelData.rm_restraunt	= _roomStruct;};
if room = rm_room22 {global.levelData.rm_room22		= _roomStruct;};
if room = rm_police {global.levelData.rm_police		= _roomStruct;};
if room = rm_police_inside {global.levelData.rm_police_inside	= _roomStruct;};
if room = rm_police_inside_boss {global.levelData.rm_police_inside_boss	= _roomStruct;};
if room = rm_culture_hall_l {global.levelData.rm_culture_hall_l	= _roomStruct;};
if room = rm_culture_hall_r {global.levelData.rm_culture_hall_r	= _roomStruct;};
if room = rm_culture_inside {global.levelData.rm_culture_inside	= _roomStruct;};
if room = rm_fasfood {global.levelData.rm_fasfood	= _roomStruct;};
if room = rm_center {global.levelData.rm_center	= _roomStruct;};			
if room = rm_center_left {global.levelData.rm_center_left		= _roomStruct;};
if room = rm_center_right {global.levelData.rm_center_right	= _roomStruct;};	
if room = rm_home_manda {global.levelData.rm_home_manda	= _roomStruct;};
if room = rm_home_entrance {global.levelData.rm_home_entrance	= _roomStruct;};
if room = rm_ieghova_inside {global.levelData.rm_ieghova_inside = _roomStruct;};
if room = rm_south {global.levelData.rm_south	= _roomStruct;};
if room = rm_box_inside {global.levelData.rm_box_inside = _roomStruct;};
if room = rm_sport_centre {global.levelData.rm_sport_centre = _roomStruct;};
if room = rm_sport_inside {global.levelData.rm_sport_inside	= _roomStruct;};
if room = rm_bibliotheka {global.levelData.rm_bibliotheka	= _roomStruct;};
if room = rm_hastronom_tukh {global.levelData.rm_hastronom_tukh = _roomStruct;};
if room = rm_north {global.levelData.rm_north	= _roomStruct;};
if room = rm_school {global.levelData.rm_school	= _roomStruct;};
if room = Room61 {global.levelData.Room61	= _roomStruct;};
#endregion 2
}

//сюди збергаємо об'єкт


function load_room(){
	var _roomStruct = 0;
#region rooms_1	
if room = rm_bakery {global.levelData.rm_bakery = _roomStruct;};		
if room = rm_food_shop {global.levelData.rm_food_shop	= _roomStruct;};		
if room = rm_indoor_rival_station {global.levelData.rm_indoor_rival_station = _roomStruct;};
if room = rm_street_first_side {global.levelData.rm_street_first_side	= _roomStruct;};
if room = rm_street_second_side {global.levelData.rm_street_second_side = _roomStruct;};
if room = rm_tri_kalynky {global.levelData.rm_tri_kalynky	= _roomStruct;};
if room = rm_tri_kalynky_boss {global.levelData.rm_tri_kalynky_boss	= _roomStruct;};
if room = rm_fishing {global.levelData.rm_fishing	= _roomStruct;};
if room = rm_zoomagazine {global.levelData.rm_zoomagazine	= _roomStruct;};		
if room = rm_okorochok_indoor {global.levelData.rm_okorochok_indoor	= _roomStruct;};		
if room = rm_storage {global.levelData.rm_storage	= _roomStruct;};
if room = rm_tech {global.levelData.rm_tech = _roomStruct;};	
if room = rm_fish_and_bazaar {global.levelData.rm_fish_and_bazaar	= _roomStruct;};			
if room = rm_street_container {global.levelData.rm_street_container = _roomStruct;};
if room = rm_street_magazine_tech_storage {global.levelData.rm_street_magazine_tech_storage = _roomStruct;};	
if room = rm_garage_gg {global.levelData.rm_garage_gg = _roomStruct;};
if room = rm_home_gg {global.levelData.rm_home_gg	= _roomStruct;};
if room = rm_home_gg_inside {global.levelData.rm_home_gg_inside = _roomStruct;};
if room = rm_home_gg_inside_kitchen {global.levelData.rm_home_gg_inside_kitchen = _roomStruct;};	
if room = rm_cinema_inside {global.levelData.rm_cinema_inside	= _roomStruct;};
if room = rm_cinema_r {global.levelData.rm_cinema_r	= _roomStruct;};
if room = rm_hotel_inside {global.levelData.rm_hotel_inside	= _roomStruct;};
if room = rm_hotel_rooms {global.levelData.rm_hotel_rooms		= _roomStruct;};
if room = rm_kitchen {global.levelData.rm_kitchen		= _roomStruct;};
if room = rm_restraunt {global.levelData.rm_restraunt	= _roomStruct;};
if room = rm_room22 {global.levelData.rm_room22		= _roomStruct;};
if room = rm_police {global.levelData.rm_police		= _roomStruct;};
if room = rm_police_inside {global.levelData.rm_police_inside	= _roomStruct;};
if room = rm_police_inside_boss {global.levelData.rm_police_inside_boss	= _roomStruct;};
if room = rm_culture_hall_l {global.levelData.rm_culture_hall_l	= _roomStruct;};
if room = rm_culture_hall_r {global.levelData.rm_culture_hall_r	= _roomStruct;};
if room = rm_culture_inside {global.levelData.rm_culture_inside	= _roomStruct;};
if room = rm_fasfood {global.levelData.rm_fasfood	= _roomStruct;};
if room = rm_center {global.levelData.rm_center	= _roomStruct;};			
if room = rm_center_left {global.levelData.rm_center_left		= _roomStruct;};
if room = rm_center_right {global.levelData.rm_center_right	= _roomStruct;};	
if room = rm_home_manda {global.levelData.rm_home_manda	= _roomStruct;};
if room = rm_home_entrance {global.levelData.rm_home_entrance	= _roomStruct;};
if room = rm_ieghova_inside {global.levelData.rm_ieghova_inside = _roomStruct;};
if room = rm_south {global.levelData.rm_south	= _roomStruct;};
if room = rm_box_inside {global.levelData.rm_box_inside = _roomStruct;};
if room = rm_sport_centre {global.levelData.rm_sport_centre = _roomStruct;};
if room = rm_sport_inside {global.levelData.rm_sport_inside	= _roomStruct;};
if room = rm_bibliotheka {global.levelData.rm_bibliotheka	= _roomStruct;};
if room = rm_hastronom_tukh {global.levelData.rm_hastronom_tukh = _roomStruct;};
if room = rm_north {global.levelData.rm_north	= _roomStruct;};
if room = rm_school {global.levelData.rm_school	= _roomStruct;};
if room = Room61 {global.levelData.Room61	= _roomStruct;};
#endregion 1

//Вихід, якщо структура не структура

if !is_string(_roomStruct) {exit;};

//тут треба видалити об'єкт, який творюється при заході в кімнату и завантажити тей, який ми зберегли

}

//////////////////////////////////////////////////////////////////
function save_game(_fileNum = 0){
	if(global.pause or global.map)
	{
		exit;
	}
	obj_loading.mainTask = global.task;

	with(daycycle)
	{
		hours2 = hours;
		minutes2 = minutes;
		seconds2 = seconds;
	}

	var _saveArray = array_create(0);
	//_saveInv = array_create(9);
	
	for(var i = 0; i < 10; i++)
	{
		//array_push(_saveInv, global.ds_inventory[# 0, i]);
		_saveInv[i] = global.ds_inventory[# 0, i];
	}
	
	//зберегти кімнату в якій ти знаходишся
	save_room();
	
	//зберегти інше
	global.statData.save_1_x = obj_dim_player1.x;
	global.statData.save_2_x = obj_dim_player2.x;
	global.statData.save_1_y = obj_dim_player1.y;
	global.statData.save_2_y = obj_dim_player2.y;
	global.statData.save_rm = room_get_name(room);
	
	global.statData.money = global.money;
	global.statData.save_inv = _saveInv;
	
	array_push(_saveArray, global.statData);
	
	//зберегти всі данні
	array_push(_saveArray, global.levelData);
	
	//Збереження
	var _filename = "savedata" + string(_fileNum) + ".sav";
	var _json = json_stringify(_saveArray);
	var _buffer = buffer_create( string_byte_length(_json) + 1, buffer_fixed, 1);
	buffer_write(_buffer, buffer_string, _json);
	buffer_save(_buffer, _filename);
	buffer_delete(_buffer);
	
	show_debug_message("SAVING");
	
}

function load_game(_fileNum = 0){
	
//завантаження збереженної інформації

	var _filename = "savedata" + string(_fileNum) + ".sav";
	if !file_exists(_filename) exit;
	
	var _buffer = buffer_load(_filename);
	var _json = buffer_read(_buffer, buffer_string);
	buffer_delete(_buffer);
	
	//з джейсона назад до нормальної мови
	
	var _loadArray = json_parse(_json);
	
	//Встановити дані
	global.statData = array_get(_loadArray, 0);
	global.levelData = array_get(_loadArray, 1);
	var saveInv = array_create(9);
	with(obj_loading)
	{
		for(var i=0;i<10;i++)
		{
			saveInv[i] = _saveInv[i];
		}
		global.task = mainTask;
	}
	
	with(daycycle)
	{
		minutes = minutes2;
		hours = hours2;
		seconds = sekonds2;
	}
	
	for(var i = 0; i < 10; i++)
	{
		global.ds_inventory[# 0, i] = saveInv[i];
	}
	global.money = global.statData.money;
	
	//повертаємося до кімнати в якій збереглися
	
	var _loadRoom = asset_get_index(global.statData.save_rm);
	room_goto(_loadRoom);
	scr_music_fon_change(_loadRoom);
	obj_loading.SkipRoomSave = true;
	
	instance_create_depth(0, 0, 0, obj_inventory);
	instance_create_depth(0, 0, 0, daycycle);
	instance_create_depth(0, 0, 0, Settings);
	instance_create_depth(0, 0, 0, obj_diary);
	instance_create_depth(0, 0, 0, obj_sound_emmiter_3d);
	instance_create_depth(0, 0, 0, obj_Battle_Interface);
	instance_create_depth(0, 0, 0, obj_mp_manager);
	
	//create the player object
	if instance_exists(obj_dim_player1) {instance_destroy(obj_dim_player1);};
	instance_create_depth(global.statData.save_1_x, global.statData.save_1_y, -1, obj_dim_player1);
	if instance_exists(obj_dim_player2) {instance_destroy(obj_dim_player2);};
	instance_create_depth(global.statData.save_2_x, global.statData.save_2_y, -1, obj_dim_player2);
	
	load_room();
}